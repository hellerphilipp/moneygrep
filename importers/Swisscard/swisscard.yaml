# Importer configuration for Swisscard

header_lines: 1
transformations:
  # 1. Date: Column 0. Convert DD.MM.YYYY -> YYYY-MM-DD
  date: "python3 -c \"import csv, sys; r = next(csv.reader(sys.stdin)); d = r[0].split('.'); print(f'{d[2]}-{d[1]}-{d[0]}')\""

  # 2. Description: Column 1
  description: "python3 -c \"import csv, sys; print(next(csv.reader(sys.stdin))[1])\""

  # 3. Original Value: Column 7 if exists, else Column 5. Multiplied by -1 to fix signage.
  original_value: "python3 -c \"import csv, sys; r = next(csv.reader(sys.stdin)); val = r[7] if r[7] else r[5]; print(float(val) * -1)\""

  # 4. Original Currency: Column 6 if exists, else Column 4.
  original_currency: "python3 -c \"import csv, sys; r = next(csv.reader(sys.stdin)); print(r[6] if r[6] else r[4])\""

  # 5. Value in Account Currency: Column 5 (CHF Amount). Multiplied by -1.
  value_in_account_currency: "python3 -c \"import csv, sys; r = next(csv.reader(sys.stdin)); print(float(r[5]) * -1)\""